/*==================================
@标题：淡化版banner 带标题+描述 和 小按钮
@时间：2013.11.22
@来源：BENZI.PW
@描述:

插件使用方式:
使用前请将 CSS HTML 完整的复制。
benzi.bzBanner();

对象调用全部在js内改动
container：最外框
cols：全部内容
btns：全部小按钮
act：按钮激活样式名
pre：向前翻按钮
next：向后翻按钮
====*/
var benzi = { bzBanner : function(){ var values = {
	container:$('.bzBanner'), 
	cols:$('.bzBanner .col'), 
	btns:$('.bzBanner .btn i'), 
	act:'act', 
	pre:$('.bzBanner .pre'),
	next:$('.bzBanner .next'), 
	now:0 }; 
function weaken( pre,now ){var col = values.cols; col.css({ zIndex:1 }).eq( pre ).css({ zIndex:2 }); col.eq( now ).css({ zIndex:3,opacity:0 }).stop(true).animate({ opacity:1 },700); } function increase( now ){var pre = now ,now = pre + 1; if( now >= values.cols.length ) now = 0; return { pre:pre ,now:now }; } function degression( now ){var pre = now ,now = pre - 1; if( now < 0 ) now = values.cols.length-1; return { pre:pre ,now:now }; } function btnStyle( now ){if( values.btns && values.act ) values.btns.removeClass( values.act ).eq( now ).addClass( values.act ); } function button(){values.btns.click(function(){var now = $(this).index(); if( values.now != now ){weaken( values.now ,now ); btnStyle( now ); text( now ); values.now = now; } }); } function change( aspect ){var val =  aspect ? degression( values.now ) : increase( values.now ); weaken( val.pre ,val.now ); btnStyle( val.now ); text( val.now ); values.now = val.now; } function shortcut(){values.pre.click(function(){ change(1); }); values.next.click(function(){ change(); }); } function text( now ){values.cols.find('span').css({ opacity:0 }).eq( now ).stop(true).delay(500).animate({ opacity:1 },1000); values.cols.find('h3').css({ opacity:0 }).eq( now ).stop(true).delay(500).animate({ opacity:1 },500); values.cols.find('p').css({ opacity:0 }).eq( now ).stop(true).delay(1000).animate({ opacity:1 },500); } $(window).resize(function(){ values.container.height( values.cols.find('img').height() );}).resize();var loop; function play( time ){clearTimeout( loop ); loop = setTimeout(function(){change(); play( 3000 ); }, time ); } function control(){values.container.hover(function(){clearTimeout( loop ); },function(){play( 2000 ); }); } function initialize(){var now = values.now; weaken( values.cols.length-1 ,now ); if(values.btns ) button(); if( values.pre && values.next ) shortcut(); btnStyle( now ); text( now ); play( 4000 ); control(); } initialize(); } };
